<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2022-06-14T18:45:31Z</date>
    <groups>
        <group>
            <uuid>b4c89977ca774eb59158ab663b496692</uuid>
            <name>Devices</name>
        </group>
        <group>
            <uuid>d32c6977978247f5875f185ada22c296</uuid>
            <name>Devices/Switches</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>91e623b7dbeb4c10bf906281b45eb0d4</uuid>
            <template>Template - Switches Gerenciavel</template>
            <name>Template - Switches Gerenciavel</name>
            <description>Template para Switches Gerenciaveis Genericos via SNMP

Modelo de Validacao: Dell PowerConnect 5548

Por: Vinicius Goncalves</description>
            <templates>
                <template>
                    <name>Template - Dispositivo Generico SNMP</name>
                </template>
            </templates>
            <groups>
                <group>
                    <name>Devices</name>
                </group>
                <group>
                    <name>Devices/Switches</name>
                </group>
            </groups>
            <discovery_rules>
                <discovery_rule>
                    <uuid>dafe5a5cf7894c9e84a5b082177f2737</uuid>
                    <name>Descoberta de Interface de Rede</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>discovery[{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1,{#IFDESCR},1.3.6.1.2.1.2.2.1.2,{#IFTYPE},1.3.6.1.2.1.2.2.1.3]</snmp_oid>
                    <key>net.if.discovery</key>
                    <delay>1h</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#IFADMINSTATUS}</macro>
                                <value>{$NET.IF.IFADMINSTATUS.MATCHES}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFADMINSTATUS}</macro>
                                <value>{$NET.IF.IFADMINSTATUS.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFOPERSTATUS}</macro>
                                <value>{$NET.IF.IFOPERSTATUS.MATCHES}</value>
                                <formulaid>G</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFOPERSTATUS}</macro>
                                <value>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>H</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFNAME}</macro>
                                <value>{$NET.IF.IFNAME.MATCHES}</value>
                                <formulaid>E</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFNAME}</macro>
                                <value>{$NET.IF.IFNAME.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>F</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFDESCR}</macro>
                                <value>{$NET.IF.IFDESCR.MATCHES}</value>
                                <formulaid>C</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFDESCR}</macro>
                                <value>{$NET.IF.IFDESCR.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>D</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFTYPE}</macro>
                                <value>{$NET.IF.IFTYPE.MATCHES}</value>
                                <formulaid>I</formulaid>
                            </condition>
                            <condition>
                                <macro>{#IFTYPE}</macro>
                                <value>{$NET.IF.IFTYPE.NOT_MATCHES}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>J</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>2682f6b624e14097a62d359747dbec64</uuid>
                            <name>Network - Interface ({#IFNAME}): Tráfego de Entrada</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.10.{#SNMPINDEX}</snmp_oid>
                            <key>net.if.in[ifInOctets.{#SNMPINDEX}]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <uuid>2d362827da32495fba2580573e6dd1e8</uuid>
                            <name>Network - Interface ({#IFNAME}): Tráfego de Saída</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.16.{#SNMPINDEX}</snmp_oid>
                            <key>net.if.out[ifOutOctets.{#SNMPINDEX}]</key>
                            <delay>3m</delay>
                            <history>7d</history>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1e5c11c2c9e54aa8849ab9a56beb6a07</uuid>
                            <name>Network - Interface ({#IFNAME}): Speed</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.5.{#SNMPINDEX}</snmp_oid>
                            <key>net.if.speed[ifSpeed.{#SNMPINDEX}]</key>
                            <delay>5m</delay>
                            <history>7d</history>
                            <trends>0</trends>
                            <units>bps</units>
                        </item_prototype>
                        <item_prototype>
                            <uuid>9a872131b41d49289f93a80c291c173c</uuid>
                            <name>Network - Interface ({#IFNAME}): Status Operacional</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid>
                            <key>net.if.status[ifOperStatus.{#SNMPINDEX}]</key>
                            <history>7d</history>
                            <trends>0</trends>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <uuid>8f09d95d6aa44dd8a95eeab12e2c1de5</uuid>
                            <expression>(avg(/Template - Switches Gerenciavel/net.if.in[ifInOctets.{#SNMPINDEX}],15m)&gt;({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}/100)*last(/Template - Switches Gerenciavel/net.if.speed[ifSpeed.{#SNMPINDEX}]) or
avg(/Template - Switches Gerenciavel/net.if.out[ifOutOctets.{#SNMPINDEX}],15m)&gt;({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}/100)*last(/Template - Switches Gerenciavel/net.if.speed[ifSpeed.{#SNMPINDEX}])) and
last(/Template - Switches Gerenciavel/net.if.speed[ifSpeed.{#SNMPINDEX}])&gt;0</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>avg(/Template - Switches Gerenciavel/net.if.in[ifInOctets.{#SNMPINDEX}],15m)&lt;(({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}-3)/100)*last(/Template - Switches Gerenciavel/net.if.speed[ifSpeed.{#SNMPINDEX}]) and
avg(/Template - Switches Gerenciavel/net.if.out[ifOutOctets.{#SNMPINDEX}],15m)&lt;(({$IF.UTIL.MAX:&quot;{#IFNAME}&quot;}-3)/100)*last(/Template - Switches Gerenciavel/net.if.speed[ifSpeed.{#SNMPINDEX}])</recovery_expression>
                            <name>Network - Interface ({#IFNAME}): Alta utilização de banda.</name>
                            <opdata>In: {ITEM.LASTVALUE1}, out: {ITEM.LASTVALUE3}, speed: {ITEM.LASTVALUE2}</opdata>
                            <priority>WARNING</priority>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>2bcd063d566b4e83a425c0abfa152152</uuid>
                            <name>Network - Interface ({#IFDESCR}): Tráfego de Rede</name>
                            <graph_items>
                                <graph_item>
                                    <color>1A7C11</color>
                                    <item>
                                        <host>Template - Switches Gerenciavel</host>
                                        <key>net.if.in[ifInOctets.{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template - Switches Gerenciavel</host>
                                        <key>net.if.out[ifOutOctets.{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$ICMP_LOSS_WARN}</macro>
                    <value>20</value>
                </macro>
                <macro>
                    <macro>{$ICMP_RESPONSE_TIME_WARN}</macro>
                    <value>0.15</value>
                </macro>
                <macro>
                    <macro>{$IF.UTIL.MAX}</macro>
                    <value>95</value>
                </macro>
                <macro>
                    <macro>{$SNMP.TIMEOUT}</macro>
                    <value>5m</value>
                </macro>
            </macros>
            <dashboards>
                <dashboard>
                    <uuid>e2704e0f51014166bfb2036a571cd5fe</uuid>
                    <name>Network interfaces</name>
                    <pages>
                        <page>
                            <widgets>
                                <widget>
                                    <type>GRAPH_PROTOTYPE</type>
                                    <width>24</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>source_type</name>
                                            <value>2</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>rows</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <name>Network - Interface ({#IFDESCR}): Tráfego de Rede</name>
                                                <host>Template - Switches Gerenciavel</host>
                                            </value>
                                        </field>
                                    </fields>
                                </widget>
                            </widgets>
                        </page>
                    </pages>
                </dashboard>
            </dashboards>
            <valuemaps>
                <valuemap>
                    <uuid>5685f2aa226f454cb7ba842c40a05e2b</uuid>
                    <name>SNMP::HostAvailable</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>NotAvailable</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Available</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>Unknown</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>167396359d534b9eb96877c0ad8adce6</uuid>
                    <name>SNMP::ServiceState</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>Down</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Up</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
</zabbix_export>
